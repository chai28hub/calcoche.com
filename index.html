<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora Importaci√≥n Dub√°i ‚Üí Espa√±a</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Estilos -->
  <link rel="stylesheet" href="estilos.css" />

  <!-- EmailJS (SDK v3) -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script>
    // Inicializa EmailJS con tu Public Key
    emailjs.init({ publicKey: '-wVmKs-licC3Qk3-j' });
  </script>

  <!-- AdSense (cargar una sola vez) -->
  <script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2994166354624544"
    crossorigin="anonymous">
  </script>
</head>
<body>

  <!-- Anuncio superior -->
  <ins class="adsbygoogle"
       style="display:block; min-height:90px; margin:12px 0"
       data-ad-client="ca-pub-2994166354624544"
       data-ad-slot="3315270269"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  <main class="layout">
    <!-- Texto izquierda -->
    <section class="intro">
      <h2>CALCULADORA APROXIMACI√ìN</h2>
      <h2>¬øImportar un coche de Dub√°i a Espa√±a? üöó</h2>
      <p>
        Que no te enga√±en con precios inflados. Hay muchas p√°ginas y personas que ofrecen presupuestos
        exagerados para traer un coche desde Dub√°i.
      </p>
      <p>
        Nuestra misi√≥n es ayudarte a entender de manera clara y sencilla cu√°les son los gastos reales
        que intervienen. Con la calculadora tendr√°s una referencia aproximada y realista antes de decidir.
      </p>
    </section>

    <!-- Calculadora en el centro -->
    <div class="calc-container">
      <h2>Calculadora Importaci√≥n Dub√°i ‚Üí Espa√±a</h2>

      <!-- Anuncio dentro -->
      <ins class="adsbygoogle"
           style="display:block; min-height:90px; margin:8px 0 18px"
           data-ad-client="ca-pub-2994166354624544"
           data-ad-slot="6469166770"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

      <label>Precio del coche en Dub√°i (AED):</label>
      <input type="number" id="precioDubai" placeholder="Introduce precio en AED" required step="0.01" inputmode="decimal" autocomplete="off" />

      <label>Emisiones CO‚ÇÇ:</label>
      <select id="co2">
        <option value="0">Menos de 120 g/km (0%)</option>
        <option value="0.0475">120-160 g/km (4,75%)</option>
        <option value="0.0975">160-200 g/km (9,75%)</option>
        <option value="0.1475" selected>M√°s de 200 g/km (14,75%)</option>
      </select>

      <button onclick="calcular()">Calcular Precio Final</button>

      <div id="resultado" class="result" style="display:none;"></div>

      <div id="contacto" class="contact-form" style="display:none;">
        <h3>¬øQuieres una estimaci√≥n exacta?</h3>
        <p>D√©janos tus datos y te enviaremos el c√°lculo preciso y opciones de importaci√≥n.</p>
        <input type="text" id="nombre" placeholder="Tu nombre" required />
        <input type="email" id="email" placeholder="Tu correo" required />
        <textarea id="mensaje" placeholder="Detalles adicionales (opcional)"></textarea>
        <button onclick="enviarContacto()">Enviar</button>
      </div>
    </div>

    <!-- Texto derecha -->
    <section class="intro">
      <h2>¬øPor qu√© usar esta calculadora? ‚úÖ</h2>
      <p>
        Muchas veces se prometen precios irreales para atraer clientes. Aqu√≠ obtendr√°s un c√°lculo transparente
        con desglose de todos los costes.
      </p>
      <p>
        As√≠ podr√°s comparar, planificar mejor tu inversi√≥n y evitar sorpresas desagradables. La herramienta es
        solo una gu√≠a, pero te dar√° una visi√≥n mucho m√°s clara del proceso.
      </p>
    </section>
  </main>

  <script>
    function calcular() {
      const precioDubai = parseFloat(document.getElementById("precioDubai").value);
      const tasaMatriculacion = parseFloat(document.getElementById("co2").value);

      if (!precioDubai) {
        alert("Por favor introduce un precio v√°lido.");
        return;
      }

      // Conversi√≥n AED ‚Üí EUR (aprox.)
      const precioEur = precioDubai * 0.25;

      // Costes fijos (aj√∫stalos si lo deseas)
      const transporte = 1700;
      const itv = 1620;
      const gastosExtra = 1500;

      // C√°lculos importaci√≥n
      const arancel = (precioEur + transporte) * 0.10;
      const iva = (precioEur + transporte + arancel) * 0.21;
      const matriculacion = precioEur * tasaMatriculacion;
      const precioFinal = precioEur + transporte + arancel + iva + matriculacion + itv + gastosExtra;

      // Mostrar resultados
      const res = document.getElementById("resultado");
      res.style.display = "block";
      res.innerHTML = `
        <h3>Resultado del c√°lculo:</h3>
        <p><b>Precio importaci√≥n Dub√°i ‚Üí Espa√±a:</b> ${precioFinal.toLocaleString('es-ES', {minimumFractionDigits: 2})} ‚Ç¨</p>
        <p>Desglose importaci√≥n:</p>
        <ul>
          <li class="precio">Precio coche: ${precioEur.toLocaleString('es-ES', {minimumFractionDigits: 2})} ‚Ç¨</li>
          <li class="arancel">Arancel (10%): ${arancel.toLocaleString('es-ES', {minimumFractionDigits: 2})} ‚Ç¨</li>
          <li>IVA (21%): ${iva.toLocaleString('es-ES', {minimumFractionDigits: 2})} ‚Ç¨</li>
          <li class="matriculacion">Tasa matriculaci√≥n: ${matriculacion.toLocaleString('es-ES', {minimumFractionDigits: 2})} ‚Ç¨</li>
          <li>Transporte: ${transporte} ‚Ç¨</li>
          <li>ITV y homologaci√≥n: ${itv} ‚Ç¨</li>
          <li class="extra">Gastos extra: ${gastosExtra} ‚Ç¨</li>
        </ul>
      `;

      document.getElementById("contacto").style.display = "block";
    }

    function enviarContacto() {
      const btn     = event?.target || document.querySelector('.contact-form button');
      const nombre  = document.getElementById("nombre").value.trim();
      const email   = document.getElementById("email").value.trim();
      const mensaje = document.getElementById("mensaje").value.trim();

      if (!nombre || !email) {
        alert("Por favor rellena tu nombre y correo.");
        return;
      }

      if (btn) { btn.disabled = true; btn.textContent = "Enviando..."; }

      // Enviar con EmailJS (usa tus IDs definitivos)
      emailjs.send('service_rsot1fm', 'template_mv0anj8', {
        from_name:  nombre,   // Debe coincidir con {{from_name}} en tu plantilla
        from_email: email,    // Debe coincidir con {{from_email}}
        message:    mensaje   // Debe coincidir con {{message}}
      })
      .then((res) => {
        console.log('EmailJS OK:', res);
        alert(`‚úÖ Gracias ${nombre}. Hemos recibido tu solicitud.`);
        if (btn) { btn.disabled = false; btn.textContent = "Enviar"; }
      })
      .catch((err) => {
        console.error('EmailJS ERROR:', err);
        alert("‚ùå Error al enviar: " + (err?.text || JSON.stringify(err)));
        if (btn) { btn.disabled = false; btn.textContent = "Enviar"; }
      });
    }
  </script>
</body>
</html>


